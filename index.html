<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Garoinha - Previs√£o do Tempo Leve e Certeira</title>
    <meta
      name="description"
      content="Previs√£o do tempo em tempo real e para os pr√≥ximos 7 dias. Busque por cidades, use sua localiza√ß√£o e salve seus locais favoritos."
    />
    <meta
      name="keywords"
      content="previs√£o tempo, clima, meteorologia, temperatura, umidade, vento"
    />
    <meta name="author" content="Garoinha" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://garoinha.app/" />
    <meta property="og:title" content="Garoinha - Previs√£o do Tempo" />
    <meta
      property="og:description"
      content="Previs√£o do tempo leve e certeira para qualquer cidade do mundo"
    />
    <meta property="og:image" content="/icons/icon-512.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://garoinha.app/" />
    <meta property="twitter:title" content="Garoinha - Previs√£o do Tempo" />
    <meta
      property="twitter:description"
      content="Previs√£o do tempo leve e certeira para qualquer cidade do mundo"
    />
    <meta property="twitter:image" content="/icons/icon-512.png" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#667eea" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Garoinha" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/icons/icon-32.png" />
    <link rel="icon" type="image/svg+xml" href="/icons/icon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />

    <!-- Preload critical resources -->
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <link rel="preload" href="styles/style.css" as="style" />
    <link rel="preload" href="config/config.js" as="script" />
    <link rel="preload" href="js/utils.js" as="script" />
    <link rel="preload" href="js/api.js" as="script" />
    <link rel="preload" href="js/ui.js" as="script" />
    <link rel="preload" href="js/app.js" as="script" />

    <!-- CSS -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/style.css" />

    <!-- Noscript fallback -->
    <noscript>
      <style>
        .loading {
          display: none !important;
        }
        .welcome-message {
          display: block !important;
        }
        .weather-info {
          display: none !important;
        }
      </style>
    </noscript>
  </head>
  <body>
    <div class="container" role="main">
      <!-- Logo e t√≠tulo -->
      <div class="logo">
        <div class="logo-icon" aria-hidden="true">‚òÅÔ∏è</div>
        <h1>Garoinha</h1>
        <p>Previs√£o leve e certeira</p>
      </div>

      <!-- Bot√£o de localiza√ß√£o -->
      <button
        id="locationBtn"
        class="location-btn"
        aria-label="Usar minha localiza√ß√£o atual para buscar previs√£o do tempo"
        title="Clique para usar sua localiza√ß√£o atual"
      >
        üìç
      </button>

      <!-- Caixa de busca -->
      <div class="search-box">
        <input
          type="text"
          id="cityInput"
          placeholder="Digite o nome da cidade..."
          aria-label="Digite o nome da cidade para buscar previs√£o do tempo"
          aria-describedby="searchInstructions"
          autocomplete="off"
          spellcheck="false"
          enterkeyhint="search"
        />
        <button
          id="searchBtn"
          aria-label="Buscar previs√£o do tempo"
          title="Buscar previs√£o do tempo"
        >
          üîç
        </button>

        <!-- Instru√ß√µes de acessibilidade (ocultas visualmente) -->
        <div id="searchInstructions" class="sr-only">
          Pressione Enter para buscar ou use as setas para navegar nas
          sugest√µes. Pressione Escape para fechar as sugest√µes. Use Ctrl+K para
          focar rapidamente na busca.
        </div>
      </div>

      <!-- Mensagem de erro -->
      <div
        class="error"
        id="errorMsg"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      ></div>

      <!-- Loading -->
      <div
        class="loading"
        id="loading"
        aria-live="polite"
        aria-busy="true"
        aria-label="Buscando dados do clima"
      >
        <div class="loading-spinner" aria-hidden="true"></div>
        <p>Buscando dados do clima...</p>
      </div>

      <!-- Mensagem de boas-vindas -->
      <div class="welcome-message" id="welcomeMsg">
        <h2>Bem-vindo ao Garoinha! üåßÔ∏è</h2>
        <p>Digite o nome de uma cidade para ver a previs√£o do tempo</p>
        <div
          class="welcome-features"
          style="
            margin-top: 20px;
            text-align: left;
            font-size: 14px;
            color: var(--secondary-text);
          "
        >
          <p>‚ú® <strong>Funcionalidades:</strong></p>
          <ul style="list-style: none; padding-left: 0">
            <li>‚úÖ Previs√£o em tempo real</li>
            <li>‚úÖ Previs√£o para 7 dias</li>
            <li>‚úÖ Busca por localiza√ß√£o</li>
            <li>‚úÖ Modo claro/escuro</li>
            <li>‚úÖ Funciona offline</li>
            <li>‚úÖ Favoritos</li>
          </ul>
        </div>
      </div>

      <!-- Informa√ß√µes do clima -->
      <div
        class="weather-info"
        id="weatherInfo"
        aria-live="polite"
        aria-atomic="true"
      >
        <!-- Localiza√ß√£o -->
        <div class="location">
          <h2 id="cityName"></h2>
          <p id="country"></p>
        </div>

        <!-- Clima atual -->
        <section class="current-weather" aria-labelledby="currentWeatherTitle">
          <h3 id="currentWeatherTitle" class="sr-only">Clima Atual</h3>
          <div class="weather-icon" id="weatherIcon" aria-hidden="true"></div>
          <div class="weather-description" id="weatherDesc"></div>
          <div class="temperature" id="temperature"></div>
        </section>

        <!-- Detalhes do clima -->
        <section class="weather-details" aria-labelledby="weatherDetailsTitle">
          <h3 id="weatherDetailsTitle" class="sr-only">Detalhes do Clima</h3>
          <div class="detail-card">
            <div class="icon" aria-hidden="true">üí®</div>
            <div class="label">Velocidade do Vento</div>
            <div class="value" id="windSpeed"></div>
          </div>
          <div class="detail-card">
            <div class="icon" aria-hidden="true">üíß</div>
            <div class="label">Umidade Relativa</div>
            <div class="value" id="humidity"></div>
          </div>
          <div class="detail-card">
            <div class="icon" aria-hidden="true">üå°Ô∏è</div>
            <div class="label">Sensa√ß√£o T√©rmica</div>
            <div class="value" id="feelsLike"></div>
          </div>
          <div class="detail-card">
            <div class="icon" aria-hidden="true">üß≠</div>
            <div class="label">Dire√ß√£o do Vento</div>
            <div class="value" id="windDirection"></div>
          </div>
        </section>
      </div>

      <!-- Informa√ß√µes de acessibilidade adicional -->
      <div class="sr-only" aria-live="polite" aria-atomic="true">
        <div id="liveRegion"></div>
      </div>
    </div>

    <!-- Scripts com fallback de carregamento -->
    <script>
      // Fallback para caso algum script falhe
      window.addEventListener("error", function (e) {
        console.error("Erro carregando a aplica√ß√£o:", e.error);
        document.getElementById("errorMsg").textContent =
          "Erro ao carregar a aplica√ß√£o. Recarregue a p√°gina.";
        document.getElementById("errorMsg").style.display = "block";
        document.getElementById("loading").style.display = "none";
      });

      // Verificar suporte a JavaScript
      document.documentElement.className = "js-enabled";
    </script>

    <!-- Configura√ß√µes -->
    <script src="config/config.js"></script>

    <!-- Utilit√°rios -->
    <script src="js/utils.js"></script>

    <!-- API -->
    <script src="js/api.js"></script>

    <!-- Interface -->
    <script src="js/ui.js"></script>

    <!-- Aplica√ß√£o principal -->
    <script src="js/app.js"></script>

    <!-- Service Worker Registration -->
    <script>
      // Registrar Service Worker
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker
            .register("/sw.js")
            .then(function (registration) {
              console.log(
                "ServiceWorker registrado com sucesso: ",
                registration.scope
              );
            })
            .catch(function (error) {
              console.log("Falha ao registrar ServiceWorker: ", error);
            });
        });
      }

      // Fallback para navegadores sem suporte a modules
      if (!("noModule" in HTMLScriptElement.prototype)) {
        const script = document.createElement("script");
        script.src = "https://unpkg.com/systemjs@6.12.1/dist/system.js";
        script.onload = function () {
          System.import("./js/app.js").catch(console.error);
        };
        document.head.appendChild(script);
      }
    </script>

    <!-- Analytics (opcional) -->
    <script>
      // Analytics simples e privacy-friendly
      window.addEventListener("load", function () {
        if (typeof gtag !== "undefined") {
          gtag("config", "GA_MEASUREMENT_ID", {
            page_title: "Garoinha - Previs√£o do Tempo",
            page_location: window.location.href,
          });
        }

        // Log de uso b√°sico
        console.log("Garoinha carregado com sucesso!");
        console.log("Funcionalidades dispon√≠veis:", {
          serviceWorker: "serviceWorker" in navigator,
          geolocation: "geolocation" in navigator,
          localStorage: "localStorage" in window,
          theme: "matchMedia" in window,
        });
      });
    </script>

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Garoinha - Previs√£o do Tempo",
        "description": "Previs√£o do tempo em tempo real e para os pr√≥ximos 7 dias",
        "url": "https://garoinha.app",
        "applicationCategory": "WeatherApplication",
        "operatingSystem": "Any",
        "permissions": "geolocation",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "BRL"
        },
        "author": {
          "@type": "Organization",
          "name": "Garoinha"
        }
      }
    </script>
  </body>
</html>
